<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LOCAL TEST - Vega-Lite Visualizations</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .test-section { margin: 30px 0; padding: 20px; border: 2px solid #ccc; }
    .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <h1>üîç LOCAL PATH TEST</h1>
  <p><strong>This page tests if Vega-Lite can load specs and data correctly.</strong></p>
  
  <div class="test-section">
    <h2>Test 1: GDP Choropleth Map</h2>
    <div id="status1" class="status">Loading...</div>
    <div id="vis1"></div>
  </div>

  <div class="test-section">
    <h2>Test 2: Brand Bar Chart</h2>
    <div id="status2" class="status">Loading...</div>
    <div id="vis2"></div>
  </div>

  <div class="test-section">
    <h2>Test 3: Fuel Type Bar Chart</h2>
    <div id="status3" class="status">Loading...</div>
    <div id="vis3"></div>
  </div>

  <div class="test-section">
    <h2>Test 4: Engine Price Chart</h2>
    <div id="status4" class="status">Loading...</div>
    <div id="vis4"></div>
  </div>

  <script>
    function testEmbed(id, specUrl, statusId) {
      console.log(`Loading ${specUrl}...`);
      vegaEmbed(id, specUrl, { actions: false })
        .then((result) => {
          document.getElementById(statusId).className = 'status success';
          document.getElementById(statusId).innerHTML = '‚úÖ SUCCESS: Visualization loaded!';
          console.log(`${specUrl} loaded successfully`);
        })
        .catch((error) => {
          document.getElementById(statusId).className = 'status error';
          document.getElementById(statusId).innerHTML = '‚ùå ERROR: ' + error.message;
          console.error(`${specUrl} failed:`, error);
        });
    }

    // Test all visualizations
    testEmbed('#vis1', 'js/gdp_choropleth.vg.json', 'status1');
    testEmbed('#vis2', 'js/brand_bar_chart.vg.json', 'status2');
    testEmbed('#vis3', 'js/fuel_type_bar_chart.vg.json', 'status3');
    testEmbed('#vis4', 'js/engine_price_chart.vg.json', 'status4');
  </script>
</body>
</html>
